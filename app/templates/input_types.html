<div class="form-group">
  {% if value.tag_type is not defined or value.tag_type != "hidden" %}
  <label for="{{key}}">
    {% if value.display_name is defined %}
    {{value.display_name}}
    {% else %}
    {{key}}
    {% endif %}
  </label>
  {% endif %}
  {% if value.tag_type is defined %}

    <!-- text type -->
    {% if value.tag_type == "text" %}
      <input type="text" class="form-control" id="{{key}}" name="{{key}}" value="{{value.default}}" aria-describedby="help{{key}}" placeholder="{{value.placeholder}}" {% if value.required %}required{%endif%} />
    <!-- end select type -->

    <!-- hidden text type -->
    {% elif value.tag_type == "hidden" %}
      <input type="hidden" class="form-control" id="{{key}}" name="{{key}}" value="{{value.default}}" >
    <!-- end hidden text type -->

    <!-- email type -->
    {% elif value.tag_type == "email" %}
      <input type="email" class="form-control" id="{{key}}" name="{{key}}" value="{{ template['inputs']['admin_email']['default'] }}" {% if value.required %}required{%endif%} >
    <!-- end email type -->

    <!-- password type -->
    {% elif value.tag_type == "password" %}
      <input type="password" class="form-control" id="{{key}}" name="{{key}}" placeholder="Enter your password" {% if value.required %}required{%endif%} >
    <!-- end password type -->

    <!-- select type -->
    <!-- https://github.com/select2/select2/issues/4220 -->
    {% elif value.tag_type == "select" %}
      <select class="js-example-basic-single js-states form-control" id="{{key}}" name="{{key}}">
      {% for constraint in value.constraints %}
        <option value="{{constraint['value']}}">{{constraint['label']}}</option>
      {% endfor %}
      </select>
    <!-- end select type -->

    <!-- radio type -->
    {% elif value.tag_type == "radio" %}
      {% for constraint in value.constraints %}
        {% if loop.first %}
          <br><input type="radio" id="{{key}}" name="{{key}}" value={{constraint['value']}} checked> {{constraint['label']}}<br>
        {% else %}
          <input type="radio" id="{{key}}" name="{{key}}" value={{constraint['value']}}> {{constraint['label']}}<br>
        {% endif %}
      {% endfor %}
    <!-- end radio type -->

    <!-- toggle type -->
    {% elif value.tag_type == "toggle" %}
      {% for constraint in value.constraints %}
      <div>
        <input type="checkbox" data-toggle="toggle" id="{{key}}" name="{{key}}" data-size="sm" data-offstyle="dark" value={{constraint['value']}}>

        <div id="encryption_alert" class="modal fade" role="dialog">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">Storage encryption alert</h5>
              </div>
              <div class="modal-body">
                <p>Only the external volume, where Galaxy data are stored, is encrypted, not the Virtual Machine root disk. The encryption layer should be secure enough to protect data uploaded from users to the Galaxy instance from any unwantend attention. However, users must be aware that the responsibility of correctly handling any sensitive data they upload to Laniakea falls on them and that the administrators of the Laniakea service can not be considered responsible for any data breach that may happen due to neglicence by Galaxy users or the action of external malicious attackers.</p>
                <p>Finally, we recommend you to backup your passphrase and regularly backup your data.</p>
                <p>For more information we invite you to visit our <a href="https://laniakea.readthedocs.io/en/latest/user_documentation/encryption/manage_encrypted_instance.html" target="_blank">documentation page</a>.</p>
              </div>
              <div class="modal-footer">
                <a id="cancelBtn" class="btn btn-primary text-white" role="button" onclick="toggle_off()">Cancel</a>
                <a id="confirmBtn" class="btn btn-success text-white" role="button" data-dismiss="modal">Accept</a>
              </div>
            </div>
          </div>
        </div>

        {% if 'storage_encryption' in key %}
        <script>
        $("#{{key}}").on('change', function() {
            if ($(this).is(':checked')) {
                $('#encryption_alert').modal({ backdrop: 'static', keyboard: false },'show');
            }
        });

        function toggle_off() {
          $('#{{key}}').prop('checked', false).change();
          $('#encryption_alert').modal('hide');
        }

        </script>
        {% endif %}
      </div>
      {% endfor %}
    <!-- end toggle type -->

    <!-- ssh special input field -->
    {% elif value.tag_type == "ssh_pub_key_type" %}
      <input type="text" class="form-control" id="{{key}}" name="{{key}}" value="{{value.default}}" aria-describedby="help{{key}}" {% if ssh_pub_key is not none %}placeholder="{{value.placeholder}}"{% endif %} {% if ssh_pub_key is none %}required{% endif %} />
    <!-- end select type -->

    {% endif %} <!-- end tag type if -->

  {% else %}
    <input {% if 'password' in key %}type="password"{% else %}type="text"{% endif %} class="form-control" id="{{key}}" name="{{key}}" value="{{value.default}}" aria-describedby="help{{key}}" {% if value.required %}required{%endif%} />
  {% endif %}  <!-- end tag type existence if -->
  <span id="help{{key}}" class="help-block">{{value.description}}</span>
</div>
